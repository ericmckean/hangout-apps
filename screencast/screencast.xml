gapi.hangout.onApiReady.add(function() {

gapi.hangout.hideApp();

gadgets.rpc.register('hangout_screencasting_event', function(event) {
  switch (event) {
  case 'show':
    break;
  case 'start':
/*
window.setTimeout(function() {
debugger;
gadgets.rpc.call.apply(null, [null, 'hangout_stop_screencast', undefined]);
}, 10000);
*/
    break;
  case 'cancel':
  case 'stop':
    // TODO: Exit the app here.
    debugger;
    break;
  default:
    throw new Error('Unknown screen casting event ' + event);
  }
});
gadgets.rpc.call.apply(null, [null, 'hangout_start_screencast', undefined]);

});
